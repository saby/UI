<html attr:lang="ru" attr:xml:lang="ru" attr:xmlns="http://www.w3.org/1999/xhtml" attr:id="root"
      attr:component="Controls/Application"
      attr:class="ui-HTML {{ onServer && !isCompatible ? 'pre-load' : '' }}">

<ws:template name="bodyTemplate">
   <body id="body" key="body-el" class="controls_theme-{{_options.theme}} {{ _bodyClasses }}">
      <a class="vdom-focus-in" tabindex="1" attr:key="vdom-focus-in"></a>
      <div id="wasaby-content" style="width: inherit; height: inherit;">
         <ws:if data="{{isCompatible}}">
            <div class="ws-focus-in"></div>
         </ws:if>

         <div id="react-root" rootapp="{{ bodyContentTmpl }}">
            <ws:if data="{{ bodyContent }}">
               <UI._base.HTML.Wait>
                  <ws:partial
                        template="{{ bodyContent }}"
                        scope="{{ templateConfig }}" />
               </UI._base.HTML.Wait>
            </ws:if>
            <ws:else>
               <UI._base.HTML.Wait content="">
               </UI._base.HTML.Wait>
            </ws:else>
         </div>

         <ws:if data="{{ scripts && _options.beforeScripts}}">
            <ws:for data="i in scripts">
               <ws:partial template="{{ i }}"/>
            </ws:for>
         </ws:if>
         <script key="bundles" type="text/javascript"
                 src="{{getResourceUrl(resourceRoot + 'bundles.js')}}"></script>
         <script key="require" type="text/javascript"
                 src="{{getResourceUrl('/cdn/RequireJS/2.3.5-p5/require-min.js')}}"></script>
         <script key="contents" type="text/javascript"
                 src="{{getResourceUrl(resourceRoot + 'contents.js')}}"></script>
         <script key="router" type="text/javascript"
                 src="{{getResourceUrl(resourceRoot + 'router.js')}}"></script>
         <ws:if data="{{ _options.builder }}">
            <script key="config" type="text/javascript"
                    src="{{getResourceUrl(resourceRoot + 'RequireJsLoader/config.js')}}"></script>
         </ws:if>
         <ws:else>
            <script key="config" type="text/javascript"
                    src="{{ linkResolver.resolveLink('RequireJsLoader/config', 'js') }}"></script>
         </ws:else>


         <ws:if data="{{_options.builder && _options.builderCompatible}}">
            <ws:partial template="wml!UI/_base/HTML/builderRunnerCompatible"
                        _options="{{_options}}"/>
         </ws:if>
         <ws:if data="{{_options.builder && !_options.builderCompatible}}">
            <ws:partial template="wml!UI/_base/HTML/builderRunner"
                        _options="{{_options}}"/>
         </ws:if>
         <ws:else data="{{!_options.builderCompatible}}">
            <div>
               <UI._base.HTML.JsLinks attr:tabindex="-1"
                                      appRoot="{{ appRoot }}"
                                      resourceRoot="{{ resourceRoot }}"/>
               <ws:if data="{{ scripts && !_options.beforeScripts }}">
                  <ws:for data="i in scripts">
                     <ws:partial template="{{ i }}"/>
                  </ws:for>
               </ws:if>
               <ws:if data="{{ reactApp }}">
                  <UI._base.HTML.StartReactApplicationScript onServer="{{ onServer }}" />
               </ws:if>
               <ws:else>
                  <UI._base.HTML.StartApplicationScript compat="{{compat}}" appRoot="{{ appRoot }}" onServer="{{ onServer }}"/>
               </ws:else>
            </div>
         </ws:else>

         <ws:if data="{{ themeChanging }}">
            <div id="theme-changing-overlay"></div>
         </ws:if>
         <ws:if data="{{ body }}">
            <ws:partial template="{{ body }}" />
         </ws:if>
      </div>
      <a class="vdom-focus-out" tabindex="0" attr:key="vdom-focus-out"></a>
   </body>
</ws:template>

   <UI._base.HTML.Head
      wsRoot="{{ wsRoot }}"
      resourceRoot="{{ resourceRoot }}"
      appRoot="{{ appRoot }}"
      RUMEnabled="{{ RUMEnabled }}"
      pageName="{{ pageName }}"
      compat="{{ compat }}"
      staticDomains="{{ staticDomains }}"
      buildnumber="{{ buildnumber }}"
      head="{{ _options.head }}"
      headJson="{{ _options.headJson }}"
      meta="{{ _options.meta }}"
      scripts="{{ _options.scripts }}"
      links="{{ _options.links }}"
      noscript="{{ _options.noscript }}"
      viewport="{{ _options.viewport }}"
      preInitScript="{{ _options.preInitScript }}"
      builder="{{ !!_options.builder }}"
      servicesPath="{{ servicesPath }}"
      defaultTheme="{{ _options.defaultTheme }}"
      product="{{ product }}"
      reactApp="{{ reactApp }}">
   </UI._base.HTML.Head>
   <ws:if data="{{_options.bodyTemplate}}">
      <ws:partial template="{{_options.bodyTemplate}}">
         <ws:partial template="bodyTemplate" scope="{{content}}" />
      </ws:partial>
   </ws:if>
   <ws:else>
      <ws:partial template="bodyTemplate" />
   </ws:else>

</html>
